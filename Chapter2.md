# 깃 스터디 - 챕터2 정리

## 목차
### **깃으로 버전 관리하기**
1. 깃 저장소 만들기
2. 버전 만들기
3. 커밋 내용 확인하기
4. 버전 만드는 단계마다 파일 상태 알아보기
5. 작업 되돌리기
6. 문제 풀이
-------------------------------

#### 1. 깃 저장소 만들기
git에서 다음과 같은 명령어들을 사용하면 저장소를 만들 수 있다.

    mkdir [디렉토리명] //저장소 생성
    cd [디렉토리명] //만든 저장소로 이동
    git init //intialize(초기화하다), 디렉터리에서 깃을 사용할 수 있도록 초기화

    ls -la //.git이라는 숨겨진 디렉터리가 만들어지며 완료

#### 2. 버전 만들기
**왜 버전을 만들어야하는가?**

--------------------
깃에서 버전을 관리하면 원래 파일 이름은 그대로 유지하면서 파일에서 무엇을 변경했는지를 변경 시점마다 저장할 수 있다. 또, 버전마다 작업한 내용을 확인할 수 있고, 그 버전으로 되돌릴 수 있다.

**스테이지와 커밋이란?**

--------------------
**1. 작업 트리(작업 디렉터리)** | 파일 수정, 저장 등의 작업을 하는 디렉터리이다. (1)에서 만들었던 디렉토리가 그 역할을 한다.

**2. 스테이지(스테이징 영역)** | 버전으로 만들 파일이 대기하는 곳이다. 예) 작업 트리에서 파일 10개를 수정 -> 4개만 버전으로 만들고 싶음 -> 해당 파일 4개만 스테이지로 이동.

**3. 저장소(repository)** | 스테이지에서 대기하고 있던 파일들을 버전으로 만들어 저장

----------------------
**깃이 버전을 만드는 과정**
    
1. hello.txt 파일 문서를 수정 후 저장 -> 작업트리
2. 수정한 hello.txt 파일을 스테이지에 넣음 + 다른 파일도 같이 가능
3. 깃에 commit 명령 -> 새로운 버전 생성, 스테이지에 대기하던 파일이 모두 저장소에 저장

        vim hello.txt //작업 트리에 새로운 문서 파일 생성
        git add hello.txt //스테이징, 스테이지에 수정한 파일 추가
        git commit -m "[메세지입력]" //버전 생성, 변경 사항 기록 가능

        +) git status //작업 중간에 해당 명령을 사용하여 깃의 변화를 확인 가능
        +) git log //저장된 버전 확인

    -----------------

        vim hello.txt //문서 수정 (이전에 커밋 기록 있음)
        commit -am  "[메세지입력]" //스테이징과 커밋을 한 번에 가능

### 3. 커밋 내용 확인하기
**$ git log //(커밋로그)** | commit이라는 항목 옆에 영문과 숫자로 된 긴 문자열은 커밋을 구별하는 용도로 커밋 해시/깃 해시라고 함. 
커밋 해시 옆에 있는 (HEAD -> main)은 이 버전이 가장 최신이라는 표시. Author 항목에는 버전을 누가 만들었는지, Date 항목에는 버전이 언제 만들어졌는지 나타남. 그 아래엔 작성자가 기록한 커밋 메세지가 나온다.

------------------
**$ git diff** | 작업 트리에 있는 파일과 스테이지에 있는 파일을 비교하거나, 스테이지에 있는 파일과 저장소에 있는 최신 커밋을 비교해서 수정한 파일을 커밋하기 전에 최종 검토 가능.

    vim hello.txt //내용 수정
    git status //hello.txt 내용 수정 확인
    git diff //삭제된 내용은 (-)로 추가된 내용은 (+)로 표시

### 4. 버전 만드는 단계마다 파일 상태 알아보기
**tracked 파일과 untracked 파일** | *git status* 결과 한 번이라도 커밋했던 파일은 계속해서 수정 사항이 있는지 추적(tracked 파일) 반면, 한 번도 커밋하지 않은 파일은 수정 내역을 추적하지 않음(untracked 파일)

**$ git log --stat** | 해당 명령을 사용하면 가장 최근 커밋부터 커밋 메세지와 관련 파일이 나열된다. 만약, 여러 파일이 한 커밋일 경우 이 명령을 사용하여 파일 별로 커밋 내역을 확인하여 구별 가능하다.

**.gitignore** | 버전 관리를 하지 않을 파일/디렉터리를 *.gitignore* 파일을 만들어 목록 지정할 수 있다. 빔을 사용해서 해당 파일을 만든 후, 그 안에 파일/디렉터리 이름, 또는 파일 확장자를 입력하면 된다.

------------
**unmodified, modified, stage 상태** | 

*git status* 명령 사용시 **working tree clean**라고 나타나면 작업 트리에 아무 변경 사항이 없고 모든 파일의 상태가 unmodified라는 뜻.

 **Changes not stage for commit**라고 나타나면 파일이 수정만 된 modifed 상태를 뜻한다.

**Changes to be committed**라고 나타나면 커밋 직전 단계, 즉 staged 상태이다.

커밋을 끝내면 수정하기 직전인 unmodifed 상태로 돌아간다.

----------

**$ git commit --amend** | 해당 명령을 사용하여 커밋 메세지를 덮어 쓸 수 있다.

### 5. 작업 되돌리기
**작업 트리에서 수정한 파일 되돌리기 - $ git restore** | 수정한 것을 취소하고 가장 최신 버전으로 되돌려야 할 때, 작업 디렉터리에서 수정한 내용을 되돌리려면 restore 명령을 사용한다.

    vim hello.txt //내용 수정
    git restore hello.txt //수정 사항 취소

**스테이징 되돌리기 - $ git restore --staged** | 수정된 파일을 스테이징까지 했을 때 스테이징을 취소한다.

    vim hello.txt //내용 수정
    git add hello.txt //hello.txt 스테이징
    git restore --staged hello.txt //스테이징 취소, 파일명을 작성하지 않으면 전체 취소

**최신 커밋 되돌리기 - $ git reset HEAD^** | 커밋까지 했을 때 마지막에 한 커밋을 취소한다.

        //파일 수정 후 커밋
        git reset HEAD^ //최신 커밋 취소, 스테이지에서 내려감

        $ git reset --soft HEAD^ //커밋을 취소하고 staged 상태로 보관
        $ git reset --mixed HEAD^ //커밋을 취소하고 unstaged 상태로 보관
        $ git reset HEAD^ //--mixed와 동일

**특정 커밋으로 되돌리기 - $ git reset [해시]** | 특정 버전으로 되돌려 놓고 그 이후 버전을 삭제할 수 있다.

        git reset --hard [복사한 커밋 해시] //HEAD가 해당 커밋 해시 위치로 변경됨 즉, 가장 최신 커밋이 됨. 이후 커밋들이 모두 삭제되고 파일 내용도 따라서 수정되어 있음.

        +) 마우스 오른쪽 클릭 혹은 Ctrl + Insert로 git bash 안에서 복사가 가능하다.

**커밋 변경 이력 취소하기 - $ git revert** | 변경 사항만 취소하고 커밋은 남겨두고 싶을 때 사용한다.

        git revert [복사한 커밋 해시] //기본 편집기가 나타나면서 커밋 메세지 입력 가능하다.
        git log //확인해보면 revert한 새로운 커밋이 생긴다. 버전들을 지우지 않고 취소했다는 커밋을 새롭게 만든다.

### 6. 문제 풀이

**답**

1. user.name "easys"
2. user.email "doit@easys.co.kr"
3. init
4. status
5. add ch01.txt
6. commit -m "ch01"
7. commit -am "ch02"
8. log
9. diff
10. restore work.txt
11. restore --staged work.txt
12. reset HEAD^
13. reset --hard *복사한 커밋 해시*
14. revert *복사한 커밋 해시*